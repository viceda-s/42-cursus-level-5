# Advanced Webserv Configuration Example
# This shows all supported directives (when parsing is complete)

server {
    listen 8080;
    host 0.0.0.0;
    server_name localhost www.example.com;

    # Maximum client body size (1MB)
    max_body_size 1048576;

    # Error pages
    error_page 404 /404.html;
    error_page 500 502 503 504 /50x.html;

    # Root location
    location / {
        root ./www;
        index index.html index.htm;
        autoindex off;
        methods GET POST DELETE;
    }

    # Static files location
    location /static {
        root ./www/static;
        autoindex on;
        methods GET;
    }

    # File upload location
    location /uploads {
        root ./www/uploads;
        methods GET POST DELETE;
        upload_path ./www/uploads;
        autoindex on;
        max_body_size 10485760;  # 10MB for uploads
    }

    # CGI location for PHP
    location /cgi-bin {
        root ./www/cgi-bin;
        methods GET POST;
        cgi .php /usr/bin/php-cgi;
        cgi .py /usr/bin/python3;
    }

    # Redirection example
    location /old-page {
        return 301 /new-page;
    }
}

# Second server block example (different port)
server {
    listen 8081;
    host 0.0.0.0;
    server_name admin.example.com;

    max_body_size 2097152;  # 2MB

    error_page 404 /admin/404.html;
    error_page 500 /admin/500.html;

    location / {
        root ./www/admin;
        index admin.html;
        autoindex off;
        methods GET POST;
    }
}

